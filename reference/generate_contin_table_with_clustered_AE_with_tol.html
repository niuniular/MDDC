<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate simulated contingency tables with the option of incorporating adverse event correlation within clusters and tolerance for total report count. — generate_contin_table_with_clustered_AE_with_tol • MDDC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate simulated contingency tables with the option of incorporating adverse event correlation within clusters and tolerance for total report count. — generate_contin_table_with_clustered_AE_with_tol"><meta name="description" content="Generate simulated contingency tables with the option of
incorporating adverse event correlation within clusters and tolerance
for total report count."><meta property="og:description" content="Generate simulated contingency tables with the option of
incorporating adverse event correlation within clusters and tolerance
for total report count."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MDDC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Introduction_to_MDDC.html">Usage Examples for MDDC in R</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/niuniular/MDDC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate simulated contingency tables with the option of incorporating adverse event correlation within clusters and tolerance for total report count.</h1>
      <small class="dont-index">Source: <a href="https://github.com/niuniular/MDDC/blob/main/R/generate_contin_table_with_clustered_AE_with_tol.R.R" class="external-link"><code>R/generate_contin_table_with_clustered_AE_with_tol.R.R</code></a></small>
      <div class="d-none name"><code>generate_contin_table_with_clustered_AE_with_tol.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate simulated contingency tables with the option of
incorporating adverse event correlation within clusters and tolerance
for total report count.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_contin_table_with_clustered_AE_with_tol</span><span class="op">(</span></span>
<span>  <span class="va">row_marginal</span>,</span>
<span>  <span class="va">column_marginal</span>,</span>
<span>  <span class="va">signal_mat</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  contin_table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  AE_idx <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_rep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  rho <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-row-marginal">row_marginal<a class="anchor" aria-label="anchor" href="#arg-row-marginal"></a></dt>
<dd><p>Marginal sums for the rows of the contingency table.</p></dd>


<dt id="arg-column-marginal">column_marginal<a class="anchor" aria-label="anchor" href="#arg-column-marginal"></a></dt>
<dd><p>Marginal sums for the columns of the contingency
table.</p></dd>


<dt id="arg-signal-mat">signal_mat<a class="anchor" aria-label="anchor" href="#arg-signal-mat"></a></dt>
<dd><p>A data matrix of the same dimension as the contingency
table with entries representing the signal strength. The values should
be greater or equal to 1, where 1 indicates no signal, and values
greater than 1 indicate signal.</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>numeric, optional, default=0.1
Tolerance for the total report count, expressed in terms of the Relative
Total Difference (RTD), defined as:</p>
<p>$$RTD = \frac{|n^{orig}_{\cdot \cdot} -
n^{sim}_{\cdot \cdot}|}{n^{orig}_{\cdot \cdot}} \times 100$$</p>
<p>This represents the difference between the total number of reports in the
simulated datasets and the original input total number of reports.
A lower value of tolerance will generate tables with total report counts
closer to the actual supplied value.</p></dd>


<dt id="arg-contin-table">contin_table<a class="anchor" aria-label="anchor" href="#arg-contin-table"></a></dt>
<dd><p>A data matrix of an \(I\) x \(J\) contingency
table with row (adverse event) and column (drug) names, of which the
row and column marginals are used to generate the simulated data.
Please first check the input contingency table using the function
<code><a href="check_and_fix_contin_table.html">check_and_fix_contin_table()</a></code>. Default is NULL.</p></dd>


<dt id="arg-ae-idx">AE_idx<a class="anchor" aria-label="anchor" href="#arg-ae-idx"></a></dt>
<dd><p>A data frame or list.
In case of data frame it must contain two variables <code>idx</code> and <code>AE</code>,
where <code>idx</code> indicates the cluster index (a number),
and <code>AE</code> lists the adverse event names. See the
<code>statin49_AE_idx</code> for <code>statin49</code> data as an example.
In case of a list, make sure the cluster indices are aligned with the
corresponding row marginal.</p></dd>


<dt id="arg-n-rep">n_rep<a class="anchor" aria-label="anchor" href="#arg-n-rep"></a></dt>
<dd><p>Number of contingency tables to be generated.</p></dd>


<dt id="arg-rho">rho<a class="anchor" aria-label="anchor" href="#arg-rho"></a></dt>
<dd><p>A numeric value, matrix, or NULL indicating the correlation
structure.If a numeric value (float or int) is provided, it represents the
correlation value <code>rho</code> to be used between all elements within each
cluster specified by <code>AE_idx</code>. If a matrix is provided, it must be a
square matrix with dimensions equal to the number of rows in
<code>contin_table</code>. In this case, <code>rho</code> defines the correlation
structure directly, and <code>AE_idx</code> is not used. If <code>rho</code> is NULL,
a covariance matrix is generated based on the correlation coefficients of
<code>contin_table</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of <code>n_rep</code> simulated contingency tables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># using statin49 as an example</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">statin49</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">statin49_AE_idx</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare a matrix of signal strength with the same dimension as</span></span></span>
<span class="r-in"><span><span class="co"># statin49, where 1 indicates no signal and values &gt; 1 indicate</span></span></span>
<span class="r-in"><span><span class="co"># signal</span></span></span>
<span class="r-in"><span><span class="va">lambda_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span>, nrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">statin49</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">statin49</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lambda_matrix</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate 5 simulated tables</span></span></span>
<span class="r-in"><span><span class="va">simulated_tables</span> <span class="op">&lt;-</span> <span class="fu">generate_contin_table_with_clustered_AE_with_tol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  contin_table <span class="op">=</span> <span class="va">statin49</span>,</span></span>
<span class="r-in"><span>  signal_mat <span class="op">=</span> <span class="va">lambda_matrix</span>,</span></span>
<span class="r-in"><span>  n_rep <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  AE_idx <span class="op">=</span> <span class="va">statin49_AE_idx</span>,</span></span>
<span class="r-in"><span>  rho <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  tol <span class="op">=</span> <span class="fl">0.1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anran Liu, Raktim Mukhopadhyay, Marianthi Markatou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

